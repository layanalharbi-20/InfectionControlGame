<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>ğŸ¦  Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; background: #f0f8ff; margin:0; padding:0; }
  #gameScreen,#dressScreen,#virusScreen,#endScreen { display:none; }
  .character { font-size:100px; }
  .ppe-icons button { font-size:30px; margin:5px; cursor:pointer; }
  #equippedVisuals { display: flex; gap: 10px; justify-content: center; position: absolute; top: -50px; left: 50%; transform: translateX(-50%); font-size: 40px; }
  #playArea { position:relative; width:90%; height:300px; margin:20px auto; border:2px solid #ccc; overflow:hidden; background:#fff; }
  .virus { position:absolute; font-size:40px; cursor:pointer; user-select:none; }
  #hud { margin-top:15px; font-size:20px; }
  #characterPreview { font-size:80px; margin:10px; }
</style>
</head>
<body>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
<div id="gameScreen">
  <h1>ğŸ¦  Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰</h1>
  <input type="text" id="playerName" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ">
  <div>
    <button onclick="chooseCharacter('ğŸ‘¨ğŸ»â€âš•ï¸')">ğŸ‘¨ğŸ»â€âš•ï¸</button>
    <button onclick="chooseCharacter('ğŸ‘©ğŸ»â€âš•ï¸')">ğŸ‘©ğŸ»â€âš•ï¸</button>
  </div>
  <div id="characterPreview"></div>
  <button onclick="startDressUp()">Ø§Ø¨Ø¯Ø£</button>
</div>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªÙ„Ø¨ÙŠØ³ -->
<div id="dressScreen">
  <h2>Ø§Ù„Ø¨Ø³ Ù…Ø¹Ø¯Ø§Øª Ø§Ù„ÙˆÙ‚Ø§ÙŠØ©</h2>
  <div id="characterContainer" style="position: relative; display: inline-block;">
    <div id="characterDisplay" class="character">ğŸ§ğŸ»</div>
    <div id="equippedVisuals"></div>
  </div>
  <div class="ppe-icons">
    <button onclick="equipVisual('ğŸ˜·')">ÙƒÙ…Ø§Ù…Ø©</button>
    <button onclick="equipVisual('ğŸ§¤')">Ù‚ÙØ§Ø²Ø§Øª</button>
    <button onclick="equipVisual('ğŸ¥¼')">Ù…Ø¹Ø·Ù</button>
    <button onclick="equipVisual('ğŸ‘“')">Ù†Ø¸Ø§Ø±Ø§Øª</button>
  </div>
</div>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„ÙÙŠØ±ÙˆØ³Ø§Øª -->
<div id="virusScreen">
  <h2 id="welcomeText"></h2>
  <div id="hud">Ø§Ù„Ù†Ù‚Ø§Ø·: 0 | Ø§Ù„ÙˆÙ‚Øª: 60</div>
  <div id="playArea"></div>
</div>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†Ù‡Ø§ÙŠØ© -->
<div id="endScreen">
  <h2 id="endMessage"></h2>
  <button id="restartBtn">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</button>
  <button onclick="window.location.reload()">âŒ Ø®Ø±ÙˆØ¬</button>
</div>

<script>
let playerName="", character="", equippedItems=[];
const requiredItems=["ğŸ˜·","ğŸ§¤","ğŸ¥¼","ğŸ‘“"];
let score=0, timeLeft=60, timerInterval, virusInterval;
let level = 1;

const gameScreen=document.getElementById("gameScreen");
const dressScreen=document.getElementById("dressScreen");
const virusScreen=document.getElementById("virusScreen");
const endScreen=document.getElementById("endScreen");
const characterDisplay=document.getElementById("characterDisplay");
const equippedVisuals=document.getElementById("equippedVisuals");
const hud=document.getElementById("hud");
const playArea=document.getElementById("playArea");
const characterPreview = document.getElementById("characterPreview");

gameScreen.style.display="block";

function chooseCharacter(c){
  character = c;
  characterPreview.textContent = c;
}

function startDressUp(){
  playerName=document.getElementById("playerName").value.trim();
  if(playerName===""){ alert("âš ï¸ Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‚Ø¨Ù„ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©"); return; }
  if(character===""){ alert("âš ï¸ Ø§Ø®ØªØ± Ø´Ø®ØµÙŠØ© Ù‚Ø¨Ù„ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©"); return; }
  gameScreen.style.display="none";
  dressScreen.style.display="block";
  characterDisplay.textContent=character==="ğŸ‘¨ğŸ»â€âš•ï¸"?"ğŸ§ğŸ»â€â™‚ï¸":"ğŸ§ğŸ»";
  equippedVisuals.innerHTML = "";
}

function equipVisual(item){
  if(!equippedItems.includes(item)){
    equippedItems.push(item);
    let itemDiv = document.createElement("div");
    itemDiv.textContent = item;
    equippedVisuals.appendChild(itemDiv);
  }

  let allEquipped = requiredItems.every(req => equippedItems.includes(req));
  if(allEquipped){
    startVirusStage();
  }
}

function startVirusStage(){
  dressScreen.style.display="none";
  virusScreen.style.display="block";
  document.getElementById("welcomeText").textContent="Ø¨Ø§Ù„ØªÙˆÙÙŠÙ‚ ÙŠØ§ "+playerName+"!";

  resetGame();
  startTimer();
  spawnViruses();
}

function resetGame(){
  score=0; 
  timeLeft = 60 - (level-1)*5;
  if(timeLeft < 20) timeLeft = 20;
  hud.textContent=`Ø§Ù„Ù†Ù‚Ø§Ø·: ${score} | Ø§Ù„ÙˆÙ‚Øª: ${timeLeft}`;
  playArea.innerHTML="";
}

function startTimer(){
  clearInterval(timerInterval);
  timerInterval=setInterval(()=>{
    timeLeft--;
    hud.textContent=`Ø§Ù„Ù†Ù‚Ø§Ø·: ${score} | Ø§Ù„ÙˆÙ‚Øª: ${timeLeft}`;
    if(timeLeft<=0) endGame();
  },1000);
}

function spawnViruses(){
  clearInterval(virusInterval);

  let spawnRate = 1000 - (level-1)*150;
  if(spawnRate < 300) spawnRate = 300;

  virusInterval=setInterval(()=>{
    createVirus(1500 - (level-1)*100);
    if(Math.random()>0.5) createVirus(1200 - (level-1)*100);
  }, spawnRate);
}

function createVirus(duration){
  let virus=document.createElement("div");
  virus.textContent="ğŸ¦ ";
  virus.className="virus";
  virus.style.top=Math.random()*250+"px";
  virus.style.left=Math.random()*90+"%";
  virus.onclick = () => {
    score++;
    if(score >= 50){
      endGame();
      return;
    }
    hud.textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${score} | Ø§Ù„ÙˆÙ‚Øª: ${timeLeft}`;
    virus.remove();
  };
  playArea.appendChild(virus);
  setTimeout(()=>{ if(virus.parentNode) virus.remove(); },duration);
}

function endGame(){
  clearInterval(timerInterval);
  clearInterval(virusInterval);
  virusScreen.style.display="none";

  endScreen.style.display="block";
  document.getElementById("endMessage").textContent = "ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! ÙØ²Øª";
}

document.getElementById("restartBtn").addEventListener("click",()=>{
  endScreen.style.display="none";
  level = 1;
  equippedItems=[];
  equippedVisuals.innerHTML="";
  dressScreen.style.display="block";
  characterDisplay.textContent=character==="ğŸ‘¨ğŸ»â€âš•ï¸"?"ğŸ§ğŸ»â€â™‚ï¸":"ğŸ§ğŸ»";
});
</script>
</body>
</html>
